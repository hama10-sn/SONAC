<div *ngIf="check_fonct('c_categorie')">
<form [formGroup]="addForm"> 
    <!--nb-card>
        <nb-card-header>Ajouter un Categorie</nb-card-header>
        
        <nb-card-body >
          
          <div class="row">
            <div class="col-sm-4">
              <div class="form-group">
                <label  class="label">Numero Branche associée <span style="color:red;">*</span></label>
                <nb-select (selectedChange)="onChangeBranche($event)" fullWidth id="categ_numerobranche">                    
                  <nb-option value="{{branche.branche_numero}}" *ngFor="let branche of listBranches">{{branche.branche_numero}}</nb-option>
                </nb-select>
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group">
                <label class="label">Numero de Catégorie <span style="color:red;">*</span></label>
                <input formControlName="categ_numero" [readonly]="true" value="onChangeBranche($event)"  type="number" nbInput fullWidth  id="categ_numero" >
              </div>

            </div>
            <div class="col-sm-4">
                <div class="form-group">
                  <label  class="label">Libelle long <span style="color:red;">*</span></label>
                  <input formControlName="categ_libellelong" type="text" nbInput fullWidth id="categ_libellelong" >
                </div>
              </div>
          </div>
          <div class="row">
            <div class="col-sm-4">
              <div class="form-group">
                <label  class="label">Libelle Court <span style="color:red;">*</span></label>
                <input formControlName="categ_libellecourt" type="text" nbInput fullWidth id="categ_libellecourt" >
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group">
                <label for="" class="label">Classification analytique</label>
                <input formControlName="categ_classificationanalytique" type="number" nbInput fullWidth id="categ_classificationanalytique" >
              </div>
            </div>
            <div class="col-sm-4">
              <div class="form-group">
                <label  class="label">Code taxe associé <span style="color:red;">*</span></label>
                <nb-select (selectedChange)="onChangeTaxe($event)" fullWidth id="categ_codetaxe">                    
                  <nb-option value="{{taxe.taxe_codetaxe}}" *ngFor="let taxe of listTaxes">{{taxe.taxe_codetaxe}}</nb-option>
                </nb-select>
              </div>
            </div> 
                         
            
          </div>
          <div class="row">
            <div class="col-sm-4">                
              <div class="form-group">
                <label for="" class="label">Code commission associé<span style="color:red;">*</span></label> 
                <nb-select (selectedChange)="onChangeCommission($event)" fullWidth id="categ_codecommission">                    
                  <nb-option value="{{commission.comm_code}}" *ngFor="let commission of listCommissions">{{commission.comm_code}}</nb-option>
                </nb-select>
              </div>                  
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label for="" class="label">Date de mise à jour <span style="color:red;">*</span></label>
                    <input formControlName="categ_datemodification" type="datetime-local" nbInput fullWidth id="categ_datemodification" >                
                </div>              
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label for="" class="label">Date de comptabilisatione <span style="color:red;">*</span></label>
                    <input formControlName="categ_datecomptabilisation" type="datetime-local" nbInput fullWidth id="categ_datecomptabilisation" >                
                </div>              
            </div>
          </div>
        
          <nb-card-footer>
            <button class="cancel" nbButton status="danger" (click)="cancel()">Annuler</button>
            &nbsp;&nbsp;<button nbButton status="success" (click)="submit()"  [disabled]='!addForm.valid'>Ajouter</button>
          </nb-card-footer>
        </nb-card-body>
      </nb-card-->





      <div class="col-lg-4">
        <nb-card>
          <nb-card-header style="background-color: rgb(7, 66, 124);color:white">Ajout Categorie</nb-card-header>
        </nb-card>
      </div>   
      
      <br>
      
<div class="tabs">
      <input type="radio" name="tabs" id="tabone" checked="checked">
      <label for="tabone" class="lab">INFORMATION</label>
    <div class="tab">
        <div class="row">
            <div class="col-sm-3">
              <div class="form-group">                
                  <label class="label">Numero de Catégorie <span style="color:red;">*</span></label>
                  <input fieldSize="small" formControlName="categ_numero" [readonly]="true" value="onChangeBranche($event)"  type="number" nbInput fullWidth  id="categ_numero" >                
              </div>
            </div>
            <!--div class="col-sm-3">
              <div class="form-group">
                <label  class="label">Numero Branche Associée <span style="color:red;">*</span></label>
                <nb-select (selectedChange)="onChangeBranche($event)" fullWidth id="categ_numerobranche">                    
                  <nb-option value="{{branche.branche_numero}}" *ngFor="let branche of listBranches">{{branche.branche_numero}}: {{branche.branche_libelleLong}}</nb-option>
                </nb-select>
              </div>
            </div-->

            
<div class="col-sm-4" >
  <div class="form-group">
      <label class="label">Numero Branche Associée <span style="color:red;">*</span></label>
      <mat-select class="form-control" [formControl]="branchCtrl" placeholder="choisir une branche"
          (selectionChange)="onChangeBranche($event)" fullWidth
          id="categ_numerobranche" #singleSelect>
          <mat-option>
              <ngx-mat-select-search [formControl]="branchFilterCtrl">
              </ngx-mat-select-search>
          </mat-option>

          <mat-option  value="{{branche.branche_numero}}"
              *ngFor="let branche of filteredbranch | async">
              {{branche.branche_numero}}: {{branche.branche_libelleLong}}
          </mat-option>
      </mat-select>
  </div>
</div>


            <div class="col-sm-3">
              <div class="form-group">
                <label  class="label">Code Taxe Associé <span style="color:red;">*</span></label>
                <nb-select [(selected)]="cat_codetaxe" (selectedChange)="onChangeTaxe($event)" fullWidth id="categ_codetaxe"> 
                  <nb-option value="">&nbsp;</nb-option>                   
                  <nb-option value="{{taxe.taxe_codetaxe}}" *ngFor="let taxe of listeCodeTaxe">{{taxe.taxe_codetaxe}}</nb-option>
                </nb-select>
              </div>                     
            </div>
        </div>
      <div class="row">
        <div class="col-sm-3">
          <div class="form-group">
            <label  class="label">Libelle Long <span style="color:red;">*</span></label>
            <input fieldSize="small" formControlName="categ_libellelong" type="text" nbInput fullWidth id="categ_libellelong" >
          </div>
        </div>          
          <div class="col-sm-3">
            <div class="form-group">
              <label  class="label">Libelle Court <span style="color:red;">*</span></label>
              <input fieldSize="small" formControlName="categ_libellecourt" type="text" nbInput fullWidth id="categ_libellecourt" >
            </div>
          </div>
            <div class="col-sm-3">
              <div class="form-group">
                <label class="label">Classification Analytique</label>
                <input fieldSize="small" min="0" formControlName="categ_classificationanalytique" type="number" nbInput fullWidth id="categ_classificationanalytique" >
              </div>
          </div> 
      </div>
    </div>  
      <input type="radio" name="tabs" id="tabtwo">
      <label for="tabtwo" class="lab">Autres</label>
      <div class="tab">
        <div class="row">
            <div class="col-sm-3">
              <div class="form-group">
                <label for="" class="label">Code Commission Associé</label> 
                <nb-select (selectedChange)="onChangeCommission($event)" fullWidth id="categ_codecommission">                    
                  <nb-option value="{{commission.comm_code}}" *ngFor="let commission of listCommissions">{{commission.comm_code}}</nb-option>
                </nb-select>
              </div>                        
           </div>
        </div>
        <div class="row">            
          <div class="col-sm-3">
            <div class="form-group">
                <label fieldSize="small" class="label">Date de Comptabilisatione <span style="color:red;">*</span></label>
                <input fieldSize="small" formControlName="categ_datecomptabilisation" value="date_comptabilisation" type="datetime-local" nbInput fullWidth id="categ_datecomptabilisation" >                
            </div>              
        </div>                                
        </div>
    </div>        
</div>
      
      <br>
      
      
      <div>
      <button nbButton status="success" (click)="submit()" [disabled]='!addForm.valid'>Ajouter</button>
      &nbsp;&nbsp;<button class="cancel" nbButton status="danger" (click)="cancel()">Annuler</button>
    </div>
    </form>
  </div>
  <div *ngIf="check_fonct('c_categorie')==false">
    <ngx-page-not-autoriser></ngx-page-not-autoriser>
  </div>